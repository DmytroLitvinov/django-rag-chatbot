{% extends "base.html" %}

{% block content %}
  <div class="container mt-5">
    <h2>Your Documents</h2>

    <!-- Back + Upload -->
    <a href="{% url 'homepage' %}" class="btn btn-outline-secondary mb-3">
      ‚Üê Back to Homepage
    </a>
    <a href="{% url 'document_upload' %}" class="btn btn-success mb-3 ms-2">+ Upload New</a>

    <ul class="list-group">
      {% for doc in documents %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ doc.title }}</strong>

            <!-- Status Badge -->
            {% if doc.status == 'PENDING' %}
              <span class="badge bg-secondary">{{ doc.get_status_display }}</span>
            {% elif doc.status == 'PROCESSING' %}
              <span class="badge bg-warning text-dark">{{ doc.get_status_display }}</span>
            {% elif doc.status == 'COMPLETED' %}
              <span class="badge bg-success">{{ doc.get_status_display }}</span>
            {% elif doc.status == 'FAILED' %}
              <span class="badge bg-danger">{{ doc.get_status_display }}</span>
            {% endif %}

            <br>
            <small class="text-muted">{{ doc.description }}</small>
          </div>
          <div class="btn-group">
            <a href="{{ doc.file.url }}" target="_blank" class="btn btn-outline-secondary btn-sm">View</a>
            <a href="{% url 'document_edit' doc.uuid %}" class="btn btn-outline-primary btn-sm">Edit</a>
            <a href="{% url 'document_delete' doc.uuid %}" class="btn btn-outline-danger btn-sm">Delete</a>
          </div>
        </li>
      {% empty %}
        <li class="list-group-item">No documents uploaded yet.</li>
      {% endfor %}
    </ul>
  </div>
{% endblock content %}
